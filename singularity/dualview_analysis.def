Bootstrap: docker
From: pytorch/pytorch:2.3.0-cuda11.8-cudnn8-devel

%files

  ../scikit-learn-dual /sklearn
  ../captum /captum

%post

  export "PATH=/opt/conda/bin:$PATH"
  pip install numpy \
    matplotlib \
    xmltodict \
    pyyaml \
    tqdm \
    scikit-image \
    scipy \
    seaborn \
    termcolor
  pip install zennit
  pip install tensorboard
  pip install /sklearn
  pip install /captum
  pip install kronfluence
  apt update
  ln -snf /usr/share/zoneinfo/$CONTAINER_TIMEZONE /etc/localtime && echo $CONTAINER_TIMEZONE > /etc/timezone
  apt install texlive texlive-latex-extra texlive-fonts-recommended dvipng -y
  pip install latex

%runscript

  cd /mnt/src
  pwd
  ls
  python surrogate_specs_plot.py "$@"
