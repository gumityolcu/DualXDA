Bootstrap: docker
From: pytorch/pytorch:2.6.0-cuda12.4-cudnn9-devel

%files

  ../scikit-learn-dual /sklearn
  ../captum /captum

%post

  export "PATH=/opt/conda/bin:$PATH"
  export DEBIAN_FRONTEND=noninteractive
  apt-get update -y && \
  apt-get install -y tzdata && \
  ln -fs /usr/share/zoneinfo/Etc/UTC /etc/localtime && \
  dpkg-reconfigure -f noninteractive tzdata && \
  apt-get install -y texlive-latex-base texlive-fonts-recommended texlive-fonts-extra texlive-latex-extra && \
  apt-get clean && \
  rm -rf /var/lib/apt/lists/*
  pip install --upgrade pip
  pip install numpy \
    matplotlib \
    xmltodict \
    pyyaml \
    tqdm \
    scikit-image \
    scipy \
    seaborn \
    termcolor
  pip install datasets
  pip install transformers
  pip install lxt

%runscript

  cd /mnt/src
  pwd
  ls
  python text_attributions.py "$@"
